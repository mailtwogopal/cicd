pipeline{
    agent any
    environment {
        image_Name = 'myapp'
        container_Name = 'webapp'
    }
    stages{
        stage('Build image'){
            steps{
                //sh "cd /home/admin/projcert/projCert"
                sh "sudo docker build . -t ${image_Name}"
            }
        }
        stage('Deploy and Run app'){
            steps{
            sh "docker run -d ${image_Name} --name=${container_Name}"
        }
        }
        stage('Test'){
            steps{
            sh "java -jar Appautomation.jar"
            }
        }
    }
}